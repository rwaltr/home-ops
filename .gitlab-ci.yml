# yamllint disable

# deps
include:
- template: Security/Secret-Detection.gitlab-ci.yml
# - template: Security/License-Scanning.gitlab-ci.yml
- template: Terraform.latest.gitlab-ci.yml


# Secrets Detection
.secret-analyzer:
  stage: ğŸ’¨ smoke test


.init: &init
  stage: ğŸ› ï¸ prep
  rules:
    - changes:
        - clusters/lin/dal/iac/**/*
  parallel:
    matrix:
      - TF_ROOT: ["clusters/lin/dal/iac"]



.validate: &validate
  stage: ğŸ’¨ smoke test
  rules:
    - changes:
        - clusters/lin/dal/iac/**/*
  parallel:
    matrix:
      - TF_ROOT: ["clusters/lin/dal/iac"]



.tf_lint: &tf_lint
  rules:
    - changes:
        - clusters/lin/dal/iac/**/*
  stage: âœ¨ lint
  script: terraform fmt -diff -check


stages:
  - ğŸ’¨ smoke test
  - ğŸ› ï¸ prep
  - âœ¨ lint
#  - ğŸ‘€ plan
#  - ğŸš€ deploy
